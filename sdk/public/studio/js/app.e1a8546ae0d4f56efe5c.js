(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0);function c(e,t){const n=r.useRef(null),c=r.useRef(e);r.useEffect(()=>{c.current=e},[e]);const a=r.useCallback(function(...e){n.current&&clearTimeout(n.current),null!==t&&(n.current=window.setTimeout(()=>c.current.apply(this,e),t))},[t]);return r.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]),a}},175:function(e,t,n){},20:function(e,t,n){"use strict";function r(e){const t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!==n?decodeURI(n[2]):null}function c(...e){let t="";return e.forEach(e=>{"string"==typeof e&&(t+=e+" ")}),t.trim()}function a(e){const t=document.cookie.split("=");return t[t.indexOf(e)+1]}function o(e){return btoa(unescape(encodeURIComponent(e)))}function i(e){return decodeURIComponent(escape(window.atob(e)))}function l(e){let t=document.getElementById("filedownload");t||((t=document.createElement("iframe")).id="filedownload",t.style.display="none",document.body.appendChild(t)),t.src=e}function s(e){if(null!==/(?<=url\().*?(?=\))/.exec(e))return/(?<=url\().*?(?=\))/.exec(e)[0]}function u(e){if("string"!=typeof e)return document.defaultView.getComputedStyle(e,null);{const n=(t=e,document.querySelector(t));if(n)return document.defaultView.getComputedStyle(n,null)}var t}n.d(t,"h",function(){return r}),n.d(t,"a",function(){return c}),n.d(t,"g",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return l}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return u})},355:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){},358:function(e,t,n){},359:function(e,t,n){},360:function(e,t,n){},361:function(e,t,n){},362:function(e,t,n){},363:function(e,t,n){},364:function(e,t,n){},365:function(e,t,n){},366:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"progress",function(){return ae}),n.d(r,"widgetPs",function(){return oe}),n.d(r,"projectName",function(){return ie}),n.d(r,"widget",function(){return le}),n.d(r,"selectedFtr",function(){return se}),n.d(r,"componentList",function(){return ue}),n.d(r,"openCanvasLoadingId",function(){return de}),n.d(r,"saveCanvasLoadingId",function(){return pe}),n.d(r,"mask",function(){return me});var c={};n.r(c),n.d(c,"getComponentList",function(){return xe}),n.d(c,"openCanvas",function(){return Re}),n.d(c,"cancelOpenCanvas",function(){return $e}),n.d(c,"saveCanvas",function(){return Fe}),n.d(c,"cancelSaveCanvas",function(){return Ie}),n.d(c,"downloadProject",function(){return Te}),n.d(c,"previewProject",function(){return Le});var a=n(0);n(360);function o(e){const[t,n]=a.useState(!1);return a.useEffect(()=>{const e=setTimeout(()=>{n(!0)},300);return()=>clearTimeout(e)},[]),t?a.createElement("div",{className:"loading"},a.createElement("div",{className:"load4"},a.createElement("div",{className:"loader"})),void 0!==e.text&&a.createElement("div",{className:"load-text"},e.text)):null}var i=n(27),l=n(13);n(359);function s(){const e=window.useMappedState(e=>e.componentList);return a.createElement("div",{className:"comp-panel"},a.createElement(u,null),e.map(({type:e,comps:t})=>a.createElement(l.b,{title:e,key:e},a.createElement("div",{className:"comp-group"},t.map(({name:e,path:t,img:n})=>a.createElement("div",{className:"comp",key:t},a.createElement(i.d,{comPath:t,placeholder:a.createElement(o,null)},a.createElement("div",{className:"comp-preview",style:{backgroundImage:`url(${n})`}})),a.createElement("div",{className:"comp-name"},e)))))))}function u(){return a.createElement(l.b,{title:"通用"},a.createElement("div",{className:"common-group"},a.createElement(i.a,null,a.createElement("i",{className:"iconfont icon-api",title:"API"})),a.createElement(i.h,null,a.createElement("i",{className:"iconfont icon-var",title:"变量"})),a.createElement(i.b,null,a.createElement("i",{className:"iconfont icon-box",title:"容器"}))))}var d=n(50),p=n(53);n(357);function m(e){const t=window.useMappedState(a.useCallback(e=>e.projectName,[])),n=a.useCallback(()=>{e.getData&&window.dispatch("previewProject",e.getData(!0))},[e.getData]),r=a.useCallback(()=>{e.getData&&window.dispatch("saveCanvas",{canvas:e.getData(!1),silent:!1})},[e.getData]);return a.createElement("div",{className:"header"},a.createElement("span",{className:"header-title"},"简绘"),a.createElement(p.a,{className:"project-name-input",placeholder:"项目名称",value:t,onChange:e=>window.commit("projectName",e.target.value)}),a.createElement("div",{className:"header-tools"},a.createElement(d.a,{className:"header-tool iconfont icon-eye",onClick:n}," 预览"),a.createElement(d.a,{className:"header-tool iconfont icon-undo",onClick:e.undo},"撤销"),a.createElement(d.a,{className:"header-tool iconfont icon-recover",onClick:e.redo},"恢复"),a.createElement(d.a,{className:"header-tool iconfont icon-clear",onClick:e.clear},"清空画布"),a.createElement(d.a,{className:"header-tool iconfont icon-save",onClick:r},"保存"),a.createElement(d.a,{className:"header-tool iconfont icon-exit",onClick:()=>window.open("/home","_self")},"退出")))}var f=n(20);n(356);function b(e){return function(t){return a.createElement("div",{className:Object(f.a)(e,t.className),style:t.style},t.children)}}const w=b("layout");w.Content=b("layout-content"),w.Header=b("layout-header"),w.Footer=b("layout-footer"),w.Sider=b("layout-sider"),w.Middle=b("layout-middle"),w.Float=b("layout-float");n(358);const g=function(e){return a.createElement("div",{className:"toolbar"},e.children)};g.Tool=function(e){return a.createElement("div",{className:"tool "+`${e.highlight?"high-light":""}`,onClick:e.onClick},a.createElement("i",{className:`iconfont ${e.font}`,title:e.title}),e.name&&a.createElement("span",{className:"tool-name"},e.name))};const{Tool:O}=g;function j(e){const t=a.useCallback(()=>{e.getData&&window.dispatch("downloadProject",e.getData(!0))},[e.getData]);return a.createElement(g,null,a.createElement(O,{font:"icon-download",title:"下载",onClick:t}),a.createElement(O,{font:"icon-rule",title:"标尺"}))}n(365);function y(){const e=window.useMappedState(a.useCallback(e=>e.mask,[]));return e?a.createElement("div",{className:"mask"},a.createElement("div",{className:"mask-loading"},a.createElement(o,{text:e}))):null}n(363);function v(){const e=window.useMappedState(e=>e.progress);return a.createElement("div",{className:`progress ${e?"progress-animation":""}`})}n(362);const{Tool:h}=g;function E(){const{widgetType:e,selectedFtr:t}=window.useMappedState(e=>({widgetType:e.widget,selectedFtr:e.selectedFtr})),n=e,r=a.useCallback(e=>{t&&window.commit("widget",e)},[t]);return a.createElement(g,null,a.createElement(h,{font:"icon-palette",onClick:()=>r("style"),highlight:"style"===n,title:"样式"}),a.createElement(h,{font:"icon-property",onClick:()=>r("property"),highlight:"property"===n,title:"属性"}),a.createElement(h,{font:"icon-event",onClick:()=>r("event"),highlight:"event"===n,title:"事件"}),a.createElement(h,{font:"icon-data",onClick:()=>r("data"),highlight:"data"===n,title:"数据"}))}n(361);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(n,!0).forEach(function(t){N(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){const t=Object(i.j)(a.useCallback(e=>e,[])),n=Object(i.k)();return a.createElement(l.f,{className:"scale-slider",onChange:r=>{e.onChange(),n({type:"style",data:C({},t.style,{scale:r})})},value:t.style.scale,max:2,min:.1,step:.01})}var S=n(169),D=n(174);n(364);function x(e){const t=e.initPs||[0,0],n=Object(S.a)(t=>{e.onEndMove&&e.onEndMove(t)},300);return a.createElement(D.a,{handle:".dragHandle",initPs:e.initPs,onMove:n},a.createElement("div",{className:"float-panel",style:{transform:`translate(${t[0]}px, ${t[1]}px)`}},a.createElement("div",{className:"dragHandle"},a.createElement("span",{className:"float-panel-title"},e.title),a.createElement("i",{className:"iconfont icon-close",onClick:e.onCloseClick})),e.children))}const R=a.Suspense,$=a.lazy(()=>n.e(3).then(n.bind(null,384))),F=a.lazy(()=>Promise.all([n.e(5),n.e(6)]).then(n.bind(null,383))),I=a.lazy(()=>n.e(7).then(n.bind(null,381))),T=a.lazy(()=>n.e(4).then(n.bind(null,382)));function L(){const{widgetType:e,selectedFtr:t,widgetPs:n}=window.useMappedState(e=>({widgetType:e.widget,widgetPs:e.widgetPs,selectedFtr:e.selectedFtr})),r=a.useCallback(e=>{window.commit("widgetPs",e)},[]);let c="",i=null;if("none"===e||!t)return null;"canvas"!==t.type||"style"!==e&&"property"!==e||(i=a.createElement($,{type:e}),c="style"===e?"画布样式":"画布属性");const l=t.state;return"node"!==t.type||"style"!==e&&"property"!==e||void 0!==l[e]&&(i=a.createElement(T,{type:e}),c="style"===e?"样式":"属性"),"node"===t.type&&"event"===e&&(i=a.createElement(I,{ftrId:t.state.id}),c="事件"),"node"===t.type&&"data"===e&&void 0!==l.data&&(i=a.createElement(F,null),c="数据"),i?a.createElement(x,{title:c,onEndMove:r,initPs:n,onCloseClick:()=>window.commit("widget","none")},a.createElement(R,{fallback:a.createElement(o,null)},i)):(window.commit("widget","none"),null)}n(355);const{Header:M,Content:q,Middle:A,Sider:J,Float:z}=w,B={width:"1920px",height:"1080px",backgroundSize:"cover",backgroundImage:"url()",backgroundColor:"#ffffff",scale:.55};n(175);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const H=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach(function(t){G(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},{host:window.location.origin,packages:"/public/packages"},{mock:!1});window.config=H;var V=n(52),_=n(368),K=n(58);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach(function(t){X(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}async function Z(e,t,r){if(window.config.mock){const{default:r}=await n.e(9).then(n.t.bind(null,379,3));if(r[e]&&r[e][t]&&r[e][t].response)return await new Promise(n=>{n(r[e][t].response)})}let c=te(e,r);/^https?:\/\//.test(c)||(c=window.config.host+c);let{headers:a}=r,o=Y(r,["headers"]);return a=W({"x-csrf-token":Object(f.g)("csrfToken")},a),await fetch(c,W({method:t,headers:a,credentials:"include"},o)).then(e=>e.json())}function ee(e,t,n){let r=te(e,n);/^https?:\/\//.test(r)||(r=window.config.host+r);let{headers:c}=n,a=Y(n,["headers"]);return c=W({"x-csrf-token":Object(f.g)("csrfToken")},c),Object(_.a)(W({method:t,url:r,headers:c},a)).pipe(Object(K.a)(({response:e})=>Object(V.a)(e)))}function te(e,t){let[n]=e.split("?"),r="";if(t.params)for(const e in t.params)if(t.params.hasOwnProperty(e)){const r=new RegExp(`{${e}}`,"g");n=n.replace(r,t.params[e])}if(t.querys){r="?";for(const e in t.querys)t.querys.hasOwnProperty(e)&&t.querys[e]&&(r+=`${e}=${t.querys[e]}&`);r=r.slice(0,r.length-1)}return r?n+r:n}window.Get=async function(e,t={}){return await Z(e,"get",t)},window.Put=async function(e,t={}){return await Z(e,"put",t)},window.Post=async function(e,t={}){return await Z(e,"post",t)},window.Delete=async function(e,t={}){return await Z(e,"delete",t)},window.RxGet=function(e,t={}){return ee(e,"get",W({responseType:"json"},t))},window.RxPut=function(e,t={}){return ee(e,"put",t)},window.RxPost=function(e,t={}){return ee(e,"post",t)},window.RxDelete=function(e,t={}){return ee(e,"delete",t)};var ne=n(170),re=n(14),ce=n.n(re);function ae(e,t){return ce()(e(),{progress:{$set:t}})}function oe(e,t){return window.sessionStorage.setItem("widgetPs",JSON.stringify(t)),ce()(e(),{widgetPs:{$set:t}})}function ie(e,t){return ce()(e(),{projectName:{$set:t}})}function le(e,t){let n=t;return t===e().widget&&(n="none"),ce()(e(),{widget:{$set:n}})}function se(e,t){return ce()(e(),{selectedFtr:{$set:t}})}function ue(e,t){return ce()(e(),{componentList:{$set:t}})}function de(e,t){return ce()(e(),{openCanvasLoadingId:{$set:t}})}function pe(e,t){return ce()(e(),{saveCanvasLoadingId:{$set:t}})}function me(e,t){return ce()(e(),{mask:{$set:t}})}var fe=n(97),be=n(133),we=n(130),ge=n(59),Oe=n(134);function je(e=3,t=3e3){return Object(be.a)(n=>n.pipe(Object(we.a)(e=>console.error(e)),Object(ge.a)((t,n)=>{if(t>=e)throw n;return t+1},0),Object(Oe.a)(e=>Object(fe.a)(Math.pow(2,e-1)*t))))}function ye(e,t){const n=new Blob([Object(f.d)(JSON.stringify({name:e,data:t}))]),r=new FormData;return r.append("name",e),r.append("file",n,"file.canvas"),r}var ve=n(18),he=n(98),Ee=n(131),Pe=n(132),Ce=n(135),Ne=n(136),ke=n(28),Se=n(137),De=n(15);function xe(e){return e.curAction$.pipe(Object(we.a)(()=>e.commit("progress",!0)),Object(Ee.a)(window.RxGet("/studio/component-list").pipe(Object(we.a)(t=>{1===t.code?e.commit("componentList",t.result.list):l.i.error(t.msg)}),Object(Pe.a)(Object(fe.a)(6e4).pipe(Object(we.a)(()=>l.i.error("组件列表获取超时!")))),je(),Object(Ce.a)(()=>(l.i.error("组件列表获取失败!"),Object(ve.b)())),Object(Ne.a)(()=>e.commit("progress",!1)))))}function Re(e,t){const n=Object(fe.a)(1e3).pipe(Object(we.a)(()=>e.commit("openCanvasLoadingId",l.i.loading("正在打开...",18e4))),Object(Pe.a)(e.createAction$("cancelOpenCanvas")));return e.curAction$.pipe(Object(ke.a)(()=>!!Object(f.h)("id")),Object(K.a)(t=>Object(he.a)(n,window.RxGet("/studio/open?id",{querys:{id:Object(f.h)("id")}}).pipe(Object(we.a)(n=>{1===n.code?(t(JSON.parse(Object(f.b)(n.result.data)).data),e.commit("projectName",n.result.name)):l.i.error(n.msg)}),Object(Pe.a)(Object(fe.a)(18e4).pipe(Object(we.a)(()=>l.i.error("打开画布出错超时!")))),je(),Object(Ce.a)(e=>(console.error(e),l.i.error("打开画布出错!"),Object(ve.b)())),Object(Ne.a)(()=>{e.dispatch("cancelOpenCanvas")})))))}function $e(e){return e.curAction$.pipe(Object(we.a)(()=>l.i.cancel(e.getState().openCanvasLoadingId)))}function Fe(e,t){return e.curAction$.pipe(Object(Se.a)(2e3),Object(ke.a)(()=>!!e.getState().projectName||(l.i.warning("请输入项目名称"),!1)),Object(we.a)(({silent:t})=>{t&&e.commit("progress",!0)}),Object(De.a)(t=>({formData:ye(e.getState().projectName,t.canvas),silent:t.silent})),Object(K.a)(({formData:t,silent:n})=>Object(he.a)((t=>Object(fe.a)(200).pipe(Object(ke.a)(t),Object(we.a)(()=>e.commit("saveCanvasLoadingId",l.i.loading("正在保存...",6e4))),Object(Pe.a)(e.createAction$("cancelSaveCanvas"))))(()=>!n),window.RxPost("/studio/save?id",{body:t,querys:{id:Object(f.h)("id")}}).pipe(Object(we.a)(e=>{1===e.code?n||l.i.success("保存成功"):l.i.error(e.msg)}),Object(Ce.a)(()=>(l.i.error("保存失败!"),Object(ve.b)())),Object(Ne.a)(()=>{e.dispatch("cancelSaveCanvas"),e.commit("progress",!1)})))))}function Ie(e){return e.curAction$.pipe(Object(we.a)(()=>l.i.cancel(e.getState().saveCanvasLoadingId)))}function Te(e,t){return e.curAction$.pipe(Object(Se.a)(3e3),Object(ke.a)(()=>!!e.getState().projectName||(l.i.warning("请输入项目名称"),!1)),Object(we.a)(()=>e.commit("progress",!0)),Object(De.a)(t=>{const n=e.getState().projectName,r=new Blob([Object(f.d)(JSON.stringify({name:n,data:t}))]),c=new FormData;return c.append("name",n),c.append("file",r,"file.canvas"),c}),Object(K.a)(t=>window.RxPost("/studio/download?id",{body:t,querys:{id:Object(f.h)("id")}}).pipe(Object(we.a)(e=>{1===e.code?Object(f.c)(`${window.config.host}/studio/download/${e.result.id}`):l.i.error(e.msg)}),Object(Pe.a)(Object(fe.a)(18e4).pipe(Object(we.a)(()=>l.i.error("下载超时!")))),Object(Ce.a)(()=>(l.i.error("下载失败!"),Object(ve.b)())),Object(Ne.a)(()=>{e.commit("progress",!1)}))))}function Le(e,t){return e.curAction$.pipe(Object(Se.a)(3e3),Object(ke.a)(()=>!!e.getState().projectName||(l.i.warning("请输入项目名称"),!1)),Object(De.a)(t=>{const n=e.getState().projectName,r=new Blob([Object(f.d)(JSON.stringify({name:n,data:t}))]),c=new FormData;return c.append("name",n),c.append("file",r,"file.canvas"),c}),Object(we.a)(()=>e.commit("mask","正在生成预览...")),Object(K.a)(t=>window.RxPost("/studio/project-preview?id",{body:t,querys:{id:Object(f.h)("id")}}).pipe(Object(we.a)(e=>{1===e.code?window.open(e.result.url):l.i.error(e.msg)}),Object(Pe.a)(Object(fe.a)(18e4).pipe(Object(we.a)(()=>l.i.error("预览超时!")))),Object(Ce.a)(()=>(l.i.error("预览失败!"),Object(ve.b)())),Object(Ne.a)(()=>{e.commit("mask",null)}))))}const Me={projectName:"项目名称",openCanvasLoadingId:-1,saveCanvasLoadingId:-1,widget:"none",widgetPs:JSON.parse(window.sessionStorage.getItem("widgetPs"))||[310,50],componentList:[],selectedFtr:null,mask:null,progress:!1};n(171);var qe=n(77),Ae=n(112);function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Be={mutations:r,actions:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(n,!0).forEach(function(t){ze(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},c)},Ue=(Ge=Me,He=Be,Object(qe.createStore)(Ge,He,Object(qe.applyMiddleware)(Object(Ae.createRxjsMiddleware)(c))));var Ge,He;const Ve=Object(ne.createUseMappedState)(Ue),_e=Ue.commit,Ke=Ue.dispatch;window.useMappedState=Ve,window.commit=_e,window.dispatch=Ke;var Qe=n(128);Object(i.i)({requirejs:{waitSeconds:0,baseUrl:window.config.packages,map:{"*":{css:`${window.config.packages}/require-css.js`}}},fontPath:""}),window.React=a,window.ReactDOM=Qe,Qe.render(a.createElement(class extends a.Component{constructor(...e){var t,n,r;super(...e),r={hasError:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error(e),console.error(t)}render(){return this.state.hasError?a.createElement("h1",null,"发生错误"):this.props.children}},null,a.createElement(i.g,null,a.createElement(function(){const e=a.useRef(()=>{}),t=a.useRef(()=>{}),n=a.useRef(()=>{}),r=a.useRef(()=>{}),c=a.useRef(null),o=a.useRef(null),l=a.useRef(null),u=function(){const[,e]=a.useState({});return()=>e({})}(),d=function(e,t){const n=a.useRef(null),r=a.useRef(e);a.useEffect(()=>{r.current=e},[e]);const c=a.useCallback(function(...e){null!==t?n.current||(r.current.apply(this,e),n.current=window.setTimeout(()=>{clearTimeout(n.current),n.current=null,r.current.apply(this,e)},t)):clearTimeout(n.current)},[t]);return a.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]),c}(()=>{if(!p.current||!o.current)return;const{width:e,height:t}=Object(f.f)(p.current),n=Object(f.f)(".studio-canvas"),r=parseFloat(n.width)*o.current().scale,c=parseFloat(n.height)*o.current().scale;let a=(parseFloat(e)-r)/2+"px",i=(parseFloat(t)-c)/2+"px";a=parseFloat(a)<0?"20px":a,i=parseFloat(i)<0?"20px":i,p.current.style.paddingLeft=a,p.current.style.paddingTop=i},600),p=a.useRef(null);var b,g;b=p,g=d,a.useEffect(()=>{if(!b.current)return;let e=new window.ResizeObserver(g);return e.observe(b.current),()=>{e.unobserve(b.current),e=null}},[g,b.current]);const O=a.useCallback(()=>{r.current(),window.commit("selectedFtr",null),window.commit("widget","none")},[r.current]);return a.useEffect(()=>{u()},[]),a.useEffect(()=>{window.dispatch("getComponentList"),window.dispatch("openCanvas",l.current)},[]),function(e,t){const n=a.useRef(e);a.useEffect(()=>{n.current=e},[e]),a.useEffect(()=>{if(null!==t){const e=setInterval(function(){n.current()},t);return()=>clearInterval(e)}},[t])}(()=>{c.current&&window.dispatch("saveCanvas",{canvas:c.current(!1),silent:!0})},4e4),a.createElement(w,{className:"studio"},a.createElement(M,{className:"studio-header"},a.createElement(m,{undo:e.current,redo:t.current,clear:n.current,getData:c.current})),a.createElement(q,null,a.createElement(J,{className:"studio-left-side"},a.createElement(j,{getData:c.current}),a.createElement(s,null)),a.createElement(A,{className:"studio-middle"},a.createElement("div",{className:"studio-canvas-container",onClick:O,ref:p},a.createElement(i.c,{className:"studio-canvas",defaultStyle:B,getData:e=>c.current=e,getStyle:e=>o.current=e,setCanvas:e=>l.current=e,undo:t=>e.current=t,redo:e=>t.current=e,clear:e=>n.current=e,noSelectedFeature:e=>r.current=e,onSwitchSelectedFeature:e=>window.commit("selectedFtr",e)})),a.createElement("div",{className:"studio-middle-bottom"},a.createElement(k,{onChange:d}))),a.createElement(J,{className:"studio-right-sider"},a.createElement(E,null),a.createElement(i.f,null))),a.createElement(z,null,a.createElement(v,null),a.createElement(L,null),a.createElement(y,null)))}))),document.getElementById("root"))}},[[366,1,2]]]);